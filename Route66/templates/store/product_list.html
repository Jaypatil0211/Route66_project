{% extends 'store/base.html' %}
{% load static %}

{% block title %}Shop All Diecast â€” Route66{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1>Shop All Models</h1>
        <p>{{ products.count }} products found {% if query %}for "{{ query }}"{% endif %}</p>
    </div>
</div>

<div class="container shop-layout">
    <!-- SIDEBAR FILTERS -->
    <aside class="filter-sidebar">
        <h3>Filters</h3>
        <form method="get">
            {% if query %}<input type="hidden" name="q" value="{{ query }}">{% endif %}

            <div class="filter-group">
                <label class="filter-label">Category</label>
                {% for cat in categories %}
                <label class="filter-option">
                    <input type="radio" name="category" value="{{ cat.slug }}"
                        {% if selected_category == cat.slug %}checked{% endif %}>
                    {{ cat.name }}
                </label>
                {% endfor %}
            </div>

            <div class="filter-group">
                <label class="filter-label">Scale</label>
                <label class="filter-option">
                    <input type="radio" name="scale" value="1:64"
                        {% if selected_scale == "1:64" %}checked{% endif %}>
                    1:64
                </label>
                <label class="filter-option">
                    <input type="radio" name="scale" value="1:43"
                        {% if selected_scale == "1:43" %}checked{% endif %}>
                    1:43
                </label>
                <label class="filter-option">
                    <input type="radio" name="scale" value="1:24"
                        {% if selected_scale == "1:24" %}checked{% endif %}>
                    1:24
                </label>
                <label class="filter-option">
                    <input type="radio" name="scale" value="1:18"
                        {% if selected_scale == "1:18" %}checked{% endif %}>
                    1:18
                </label>
            </div>

            <div class="filter-group">
                <label class="filter-label">Price Range</label>
                <div class="price-inputs">
                    <input type="number" name="min_price" placeholder="Min â‚¹" class="price-input">
                    <input type="number" name="max_price" placeholder="Max â‚¹" class="price-input">
                </div>
            </div>

            <div class="filter-group">
                <label class="filter-label">Sort By</label>
                <select name="sort" class="filter-select">
                    <option value="-created_at" {% if sort == '-created_at' %}selected{% endif %}>Newest</option>
                    <option value="price_asc" {% if sort == 'price_asc' %}selected{% endif %}>Price: Low to High</option>
                    <option value="price_desc" {% if sort == 'price_desc' %}selected{% endif %}>Price: High to Low</option>
                    <option value="name" {% if sort == 'name' %}selected{% endif %}>Name A-Z</option>
                </select>
            </div>

            <button type="submit" class="btn-filter">Apply Filters</button>
            <a href="{% url 'store:product_list' %}" class="btn-clear">Clear All</a>
        </form>
    </aside>

    <!-- PRODUCT GRID -->
    <div class="shop-main">
        {% if products %}
        <div class="product-grid">
            {% for product in products %}
            {% include 'store/partials/product_card.html' with product=product %}
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">ðŸš—</div>
            <h3>No products found</h3>
            <p>Try adjusting your filters or search terms.</p>
            <a href="{% url 'store:product_list' %}" class="btn-primary">Clear Filters</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
